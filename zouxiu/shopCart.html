<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<!-- SEO  -->
		<meta name="keywords" content="" />
		<meta name="description" content="" />
		<meta name="author" content="" />
		<!-- 苹果专用 -->
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="blank" />
		<meta name="format-detection" content="telephone=no" />
		<!-- 简单移动端适配 -->
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
		<!-- 图标 -->
		<link rel="shortcut icon" href="">

		<title>模板</title>

		<link rel="stylesheet" href="dist/css/bootstrap.min.css" />
		<link rel="stylesheet" href="dist/css/bootstrap-theme.min.css" />
		<link rel="stylesheet" href="css/app.css">

		<script type="text/javascript" src="js/jquery-2.1.0.js"></script>

		<style>

		</style>
	</head>

	<body>
		<section id="outLayOut">
			<input type="text" id="userName" placeholder="用户名" />
			<br />
			<br />
			<br />
			<input type="text" id="psw" placeholder="密码" />
			<br />
			<br />
			<br />
			<input type="text" id="pswSure" placeholder="确认密码" />
			<br />
			<br />
			<br />
			<button id="btn">同意服务协议并注册</button>

		</section>

		<script type="text/javascript">
			var userTag = sessionStorage.getItem('userName');
			if(userTag) {
				$('#userName').val(userTag);
			}

			$("#btn").click(function() {
				if($("#userName").val() && $("#psw").val() && $("#pswSure").val() && ($("#psw").val() == $("#pswSure").val())) {
					$.ajax({
						type: "POST",
						url: 'http://datainfo.duapp.com/shopdata/userinfo.php',
						data: {
							"status":register,
							"userID":$("#userName").val(),
							"password":$("#pswSure").val(),
						},
						success: function(data) {
							if(data ==0 ){
								alert("用户重命名");
							}else if(data == 1){
								console.log("您已经注册成功");
								sessionStorage.setItem('userName',$("#userName").val());
								window.location.href = "login.html";
							}else if(data == 2){
								alert("数据库错误");
							}else{
								alert("未知错误");
							}
						},
						error: function(XMLHttpRequest, textStatus, errorThrown) {
							console.log("XMLHttpRequest：====" + XMLHttpRequest);
		    				console.log("textStatus：=====" + textStatus);
		    				console.log("errorThrown：======" + errorThrown);
						}
					})

				}else{
					//错误判断以及提醒
				}

			})
		</script>
		<script type="text/javascript" src="js/app.js"></script>

	</body>

</html>